function m(n,r){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);r&&(t=t.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),e.push.apply(e,t)}return e}function y(n){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?m(Object(e),!0).forEach(function(t){d(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):m(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}function d(n,r,e){return r in n?Object.defineProperty(n,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[r]=e,n}function L(n,r){if(!!n){if(typeof n=="string")return g(n,r);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return g(n,r)}}function g(n,r){(r==null||r>n.length)&&(r=n.length);for(var e=0,t=new Array(r);e<r;e++)t[e]=n[e];return t}function C(n,r){var e=typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(!e){if(Array.isArray(n)||(e=L(n))||r&&n&&typeof n.length=="number"){e&&(n=e);var t=0,i=function(){};return{s:i,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(o){throw o},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,p=!1,s;return{s:function(){e=e.call(n)},n:function(){var o=e.next();return a=o.done,o},e:function(o){p=!0,s=o},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(p)throw s}}}}var v={directiveName:"snip",snipMethod:"css",maxLines:3,separators:[". ",", "," ",""],ellipsis:".\u200A.\u200A.",debugMode:!1,exposeSnipFunction:!1,snipFunctionName:"snipText"},j=function(r,e){var t=r.elementMap.get(e),i=t.fullText,a=t.maxLines;e.textContent=i,e.style.display="-webkit-box",e.style.webkitLineClamp=a,e.style.webkitBoxOrient="vertical",e.style.overflow="hidden"},I=1.2,h=function(r){var e=window.getComputedStyle(r),t=parseInt(e.height),i=e.lineHeight==="normal"?parseInt(e.fontSize)*I:parseInt(e.lineHeight);return t===0&&i===0?0:Math.ceil(t/i)},_=function(r,e){var t=r.elementMap.get(e),i=t.fullText,a=t.maxLines,p=r.options,s=p.ellipsis,o=p.separators;if(e.textContent=i,e.style.display=null,e.style.webkitLineClamp=null,e.style.webkitBoxOrient=null,e.style.overflow=null,!(a<=0||h(e)<=a)){var u={unprocessed:i,processed:""};o.forEach(function(c){var l=C(u.unprocessed.split(c)),b;try{for(l.s();!(b=l.n()).done;){var f=b.value;if(e.textContent="".concat(u.processed).concat(f).concat(c).concat(s),h(e)>a){u.unprocessed=f;break}u.processed="".concat(u.processed).concat(f).concat(c)}}catch(w){l.e(w)}finally{l.f()}}),e.textContent="".concat(u.processed.trim()).concat(s)}},H=function(r){return function(e){var t=r.elementMap.get(e);if(t.snipMethod==="css"){j(r,e);return}t.snipMethod==="js"&&(_(r,e),t.prevWidth=e.clientWidth,t.prevHeight=e.clientHeight)}},S=function(r,e){var t=parseInt(e);if(!isNaN(t))return t;var i=r.options.maxLines,a=parseInt(i);return isNaN(a)?v.maxLines:a},A=function(){return typeof CSS!="undefined"&&CSS.supports("display","-webkit-box")&&CSS.supports("-webkit-line-clamp","3")&&CSS.supports("-webkit-box-orient","vertical")},M=function(r,e){if(!A())return"js";if(e==="css"||e==="js")return e;var t=r.options.snipMethod;return t==="css"||t==="js"?t:v.snipMethod},x=function(r,e,t){var i=r.elementMap.get(t),a=i.observer||new ResizeObserver(function(){(t.clientWidth!==i.prevWidth||t.clientHeight!==i.prevHeight)&&e(t)});a.observe(t),i.observer=a},O=function(r,e){var t=r.elementMap.get(e);t.observer&&t.observer.disconnect(),t.observer&&delete t.prevWidth,t.observer&&delete t.prevHeight,t.observer&&delete t.observer},P=function(r,e){return function(t,i){var a=i.value,p=i.arg,s=r.elementMap,o={fullText:t.textContent,maxLines:S(r,a),snipMethod:M(r,p)};s.set(t,o);var u=o.snipMethod==="js";u&&typeof ResizeObserver!="undefined"?x(r,e,t):e(t)}},T=function(r,e){return function(t,i){var a=i.value,p=i.arg,s=r.elementMap.get(t),o=s.maxLines,u=s.snipMethod;s.maxLines=S(r,a),s.snipMethod=M(r,p);var c=s.snipMethod==="js";c&&typeof ResizeObserver!="undefined"?x(r,e,t):O(r,t);var l=o!==s.maxLines||u!==s.snipMethod&&s.snipMethod==="css";l&&e(t)}},N=function(r){return function(e){var t=r.elementMap;O(r,e),t.delete(e)}},z={install:function(r,e){var t;e=y(y({},v),e);var i=new WeakMap,a={elementMap:i,options:e},p=H(a),s=P(a,p),o=T(a,p),u=N(a),c=r.version[0]>2;r.directive(e.directiveName,(t={},d(t,c?"mounted":"inserted",s),d(t,c?"updated":"update",o),d(t,c?"unmounted":"unbind",u),t)),e.exposeSnipFunction&&(r.prototype["$".concat(e.snipFunctionName)]=p),e.debugMode&&(window.__VueSnipState=a)}};export{z as default};
