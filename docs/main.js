function _defineProperty(n,s,i){return s in n?Object.defineProperty(n,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[s]=i,n}function _createForOfIteratorHelper(n,s){var i=typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(!i){if(Array.isArray(n)||(i=_unsupportedIterableToArray(n))||s&&n&&typeof n.length=="number"){i&&(n=i);var m=0,S=function(){};return{s:S,n:function(){return m>=n.length?{done:!0}:{done:!1,value:n[m++]}},e:function(c){throw c},f:S}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var g=!0,h=!1,x;return{s:function(){i=i.call(n)},n:function(){var c=i.next();return g=c.done,c},e:function(c){h=!0,x=c},f:function(){try{!g&&i.return!=null&&i.return()}finally{if(h)throw x}}}}function _unsupportedIterableToArray(n,s){if(!!n){if(typeof n=="string")return _arrayLikeToArray(n,s);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(n,s)}}function _arrayLikeToArray(n,s){(s==null||s>n.length)&&(s=n.length);for(var i=0,m=new Array(s);i<s;i++)m[i]=n[i];return m}function _typeof(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(i){return typeof i}:_typeof=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_typeof(n)}(function(n,s){(typeof exports=="undefined"?"undefined":_typeof(exports))==="object"&&typeof module!="undefined"?module.exports=s():typeof define=="function"&&define.amd?define(s):(n=typeof globalThis!="undefined"?globalThis:n||self,n.VueSnip=s())})(this,function(){"use strict";var n={directiveName:"snip",snipMethod:"css",maxLines:3,separators:[". ",", "," ",""],ellipsis:".\u200A.\u200A.",debugMode:!1,exposeSnipFunction:!1,snipFunctionName:"snipText"},s=function(r,e){var t=r.elementMap.get(e),a=t.fullText,o=t.maxLines;e.textContent=a,e.style.display="-webkit-box",e.style.webkitLineClamp=o,e.style.webkitBoxOrient="vertical",e.style.overflow="hidden"},i=1.2,m=function(r){var e=window.getComputedStyle(r),t=parseInt(e.height),a=e.lineHeight==="normal"?parseInt(e.fontSize)*i:parseInt(e.lineHeight);return t===0&&a===0?0:Math.ceil(t/a)},S=function(r,e){var t=r.elementMap.get(e),a=t.fullText,o=t.maxLines,l=r.options,u=l.ellipsis,y=l.separators;if(e.textContent=a,e.style.display=null,e.style.webkitLineClamp=null,e.style.webkitBoxOrient=null,e.style.overflow=null,!(o<=0||m(e)<=o)){var f={unprocessed:a,processed:""};y.forEach(function(v){var b=_createForOfIteratorHelper(f.unprocessed.split(v)),C;try{for(b.s();!(C=b.n()).done;){var M=C.value;if(e.textContent="".concat(f.processed).concat(M).concat(v).concat(u),m(e)>o){f.unprocessed=M;break}f.processed="".concat(f.processed).concat(M).concat(v)}}catch($){b.e($)}finally{b.f()}}),e.textContent="".concat(f.processed.trim()).concat(u)}},g=function(r){return function(e){var t=r.elementMap.get(e);if(t.snipMethod==="css"){s(r,e);return}t.snipMethod==="js"&&(S(r,e),t.prevWidth=e.clientWidth,t.prevHeight=e.clientHeight)}},h=function(r,e){var t=parseInt(e);if(!isNaN(t))return t;var a=r.options.maxLines,o=parseInt(a);return isNaN(o)?n.maxLines:o},x=function(){return typeof CSS!="undefined"&&CSS.supports("display","-webkit-box")&&CSS.supports("-webkit-line-clamp","3")&&CSS.supports("-webkit-box-orient","vertical")},d=function(r,e){if(!x())return"js";if(e==="css"||e==="js")return e;var t=r.options.snipMethod;return t==="css"||t==="js"?t:n.snipMethod},c=function(r,e,t){var a=r.elementMap.get(t),o=a.observer||new ResizeObserver(function(){(t.clientWidth!==a.prevWidth||t.clientHeight!==a.prevHeight)&&e(t)});o.observe(t),a.observer=o},w=function(r,e){var t=r.elementMap.get(e);t.observer&&t.observer.disconnect(),t.observer&&delete t.prevWidth,t.observer&&delete t.prevHeight,t.observer&&delete t.observer},I=function(r,e){return function(t,a){var o=a.value,l=a.arg,u=r.elementMap,y={fullText:t.textContent,maxLines:h(r,o),snipMethod:d(r,l)};u.set(t,y);var f=y.snipMethod==="js";f&&typeof ResizeObserver!="undefined"?c(r,e,t):e(t)}},T=function(r,e){return function(t,a){var o=a.value,l=a.arg,u=r.elementMap.get(t),y=u.maxLines,f=u.snipMethod;u.maxLines=h(r,o),u.snipMethod=d(r,l);var v=u.snipMethod==="js";v&&typeof ResizeObserver!="undefined"?c(r,e,t):w(r,t);var b=y!==u.maxLines||f!==u.snipMethod&&u.snipMethod==="css";b&&e(t)}},H=function(r){return function(e){var t=r.elementMap;w(r,e),t.delete(e)}},A=Object.defineProperty,_=Object.getOwnPropertySymbols,N=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,O=function(r,e,t){return e in r?A(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t},L=function(r,e){for(var t in e||(e={}))N.call(e,t)&&O(r,t,e[t]);if(_){var a=_createForOfIteratorHelper(_(e)),o;try{for(a.s();!(o=a.n()).done;){var t=o.value;P.call(e,t)&&O(r,t,e[t])}}catch(l){a.e(l)}finally{a.f()}}return r},z={install:function(r,e){var t;e=L(L({},n),e);var a=new WeakMap,o={elementMap:a,options:e},l=g(o),u=I(o,l),y=T(o,l),f=H(o),v=r.version[0]>2;r.directive(e.directiveName,(t={},_defineProperty(t,v?"mounted":"inserted",u),_defineProperty(t,v?"updated":"update",y),_defineProperty(t,v?"unmounted":"unbind",f),t)),e.exposeSnipFunction&&(r.prototype["$".concat(e.snipFunctionName)]=l),e.debugMode&&(window.__VueSnipState=o)}};return z});
