(function(d,c){typeof exports=="object"&&typeof module!="undefined"?module.exports=c():typeof define=="function"&&define.amd?define(c):(d=typeof globalThis!="undefined"?globalThis:d||self,d.VueSnip=c())})(this,function(){"use strict";function d(n,r,e){return r in n?Object.defineProperty(n,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[r]=e,n}function c(n,r){if(!!n){if(typeof n=="string")return b(n,r);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return b(n,r)}}function b(n,r){(r==null||r>n.length)&&(r=n.length);for(var e=0,t=new Array(r);e<r;e++)t[e]=n[e];return t}function y(n,r){var e=typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(!e){if(Array.isArray(n)||(e=c(n))||r&&n&&typeof n.length=="number"){e&&(n=e);var t=0,i=function(){};return{s:i,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,s=!1,o;return{s:function(){e=e.call(n)},n:function(){var u=e.next();return a=u.done,u},e:function(u){s=!0,o=u},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(s)throw o}}}}var v={directiveName:"snip",snipMethod:"css",maxLines:3,separators:[". ",", "," ",""],ellipsis:".\u200A.\u200A.",debugMode:!1,exposeSnipFunction:!1,snipFunctionName:"snipText"},C=function(r,e){var t=r.elementMap.get(e),i=t.fullText,a=t.maxLines;e.textContent=i,e.style.display="-webkit-box",e.style.webkitLineClamp=a,e.style.webkitBoxOrient="vertical",e.style.overflow="hidden"},I=1.2,h=function(r){var e=window.getComputedStyle(r),t=parseFloat(e.height),i=e.lineHeight==="normal"?parseFloat(e.fontSize)*I:parseFloat(e.lineHeight);return t===0&&i===0?0:Math.ceil(t/i)},T=function(r,e){var t=r.elementMap.get(e),i=t.fullText,a=t.maxLines,s=r.options,o=s.ellipsis,u=s.separators;if(e.textContent=i,e.style.display=null,e.style.webkitLineClamp=null,e.style.webkitBoxOrient=null,e.style.overflow=null,!(a<=0||h(e)<=a)){var p={unprocessed:i,processed:""};u.forEach(function(l){var f=y(p.unprocessed.split(l)),L;try{for(f.s();!(L=f.n()).done;){var m=L.value;if(e.textContent="".concat(p.processed).concat(m).concat(l).concat(o),h(e)>a){p.unprocessed=m;break}p.processed="".concat(p.processed).concat(m).concat(l)}}catch(B){f.e(B)}finally{f.f()}}),e.textContent="".concat(p.processed.trim()).concat(o)}},H=function(r){return function(e){var t=r.elementMap.get(e);if(t.snipMethod==="css"){C(r,e);return}t.snipMethod==="js"&&(T(r,e),t.prevWidth=e.clientWidth,t.prevHeight=e.clientHeight)}},g=function(r,e){var t=parseInt(e);if(!isNaN(t))return t;var i=r.options.maxLines,a=parseInt(i);return isNaN(a)?v.maxLines:a},A=function(){return typeof CSS!="undefined"&&CSS.supports("display","-webkit-box")&&CSS.supports("-webkit-line-clamp","3")&&CSS.supports("-webkit-box-orient","vertical")},S=function(r,e){if(!A())return"js";if(e==="css"||e==="js")return e;var t=r.options.snipMethod;return t==="css"||t==="js"?t:v.snipMethod},M=function(r,e,t){var i=r.elementMap.get(t),a=i.observer||new ResizeObserver(function(){(t.clientWidth!==i.prevWidth||t.clientHeight!==i.prevHeight)&&e(t)});a.observe(t),i.observer=a},x=function(r,e){var t=r.elementMap.get(e);t.observer&&t.observer.disconnect(),t.observer&&delete t.prevWidth,t.observer&&delete t.prevHeight,t.observer&&delete t.observer},N=function(r,e){return function(t,i){var a=i.value,s=i.arg,o=r.elementMap,u={fullText:t.textContent,maxLines:g(r,a),snipMethod:S(r,s)};o.set(t,u);var p=u.snipMethod==="js";p&&typeof ResizeObserver!="undefined"?M(r,e,t):e(t)}},P=function(r,e){return function(t,i){var a=i.value,s=i.arg,o=r.elementMap.get(t),u=o.maxLines,p=o.snipMethod;o.maxLines=g(r,a),o.snipMethod=S(r,s);var l=o.snipMethod==="js";l&&typeof ResizeObserver!="undefined"?M(r,e,t):x(r,t);var f=u!==o.maxLines||p!==o.snipMethod&&o.snipMethod==="css";f&&e(t)}},j=function(r){return function(e){var t=r.elementMap;x(r,e),t.delete(e)}},z=Object.defineProperty,w=Object.getOwnPropertySymbols,$=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,O=function(r,e,t){return e in r?z(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t},_=function(r,e){for(var t in e||(e={}))$.call(e,t)&&O(r,t,e[t]);if(w){var i=y(w(e)),a;try{for(i.s();!(a=i.n()).done;){var t=a.value;E.call(e,t)&&O(r,t,e[t])}}catch(s){i.e(s)}finally{i.f()}}return r},F={install:function(r,e){var t;e=_(_({},v),e);var i=new WeakMap,a={elementMap:i,options:e},s=H(a),o=N(a,s),u=P(a,s),p=j(a),l=r.version[0]>2;r.directive(e.directiveName,(t={},d(t,l?"mounted":"inserted",o),d(t,l?"updated":"update",u),d(t,l?"unmounted":"unbind",p),t)),e.exposeSnipFunction&&(r.prototype["$".concat(e.snipFunctionName)]=s),e.debugMode&&(window.__VueSnipState=a)}};return F});
