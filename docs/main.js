!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).VueSnip=t()}(this,(function(){"use strict";function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function t(t){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?e(Object(o),!0).forEach((function(e){n(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,s=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw s}}}}var i={directiveName:"snip",snipMethod:"css",maxLines:3,separators:[". ",", "," ",""],ellipsis:". . .",debugMode:!1,exposeSnipFunction:!1,snipFunctionName:"snipText"},s=function(e){var t=window.getComputedStyle(e),n=parseFloat(t.height),r="normal"===t.lineHeight?1.2*parseFloat(t.fontSize):parseFloat(t.lineHeight);return 0===n&&0===r?0:Math.ceil(n/r)},a=function(e){return function(t){var n=e.elementMap.get(t);"css"!==n.snipMethod?"js"===n.snipMethod&&(!function(e,t){var n=e.elementMap.get(t),r=n.fullText,i=n.maxLines,a=e.options,c=a.ellipsis,u=a.separators;if(t.textContent=r,t.style.display=null,t.style.webkitLineClamp=null,t.style.webkitBoxOrient=null,t.style.overflow=null,!(i<=0||s(t)<=i)){var l={unprocessed:r,processed:""};u.forEach((function(e){var n,r=o(l.unprocessed.split(e));try{for(r.s();!(n=r.n()).done;){var a=n.value;if(t.textContent="".concat(l.processed).concat(a).concat(e).concat(c),s(t)>i){l.unprocessed=a;break}l.processed="".concat(l.processed).concat(a).concat(e)}}catch(e){r.e(e)}finally{r.f()}})),t.textContent="".concat(l.processed.trim()).concat(c)}}(e,t),n.prevWidth=t.clientWidth,n.prevHeight=t.clientHeight):function(e,t){var n=e.elementMap.get(t),r=n.fullText,o=n.maxLines;t.textContent=r,t.style.display="-webkit-box",t.style.webkitLineClamp=o,t.style.webkitBoxOrient="vertical",t.style.overflow="hidden"}(e,t)}},c=function(e,t){var n=parseInt(t);if(!isNaN(n))return n;var r=e.options.maxLines,o=parseInt(r);return isNaN(o)?i.maxLines:o},u=function(e,t){if(!("undefined"!=typeof CSS&&CSS.supports("display","-webkit-box")&&CSS.supports("-webkit-line-clamp","3")&&CSS.supports("-webkit-box-orient","vertical")))return"js";if("css"===t||"js"===t)return t;var n=e.options.snipMethod;return"css"===n||"js"===n?n:i.snipMethod},l=function(e,t,n){var r=e.elementMap.get(n),o=r.observer||new ResizeObserver((function(){n.clientWidth===r.prevWidth&&n.clientHeight===r.prevHeight||t(n)}));o.observe(n),r.observer=o},p=function(e,t){var n=e.elementMap.get(t);n.observer&&n.observer.disconnect(),n.observer&&delete n.prevWidth,n.observer&&delete n.prevHeight,n.observer&&delete n.observer};return{install:function(e,r){var o;r=t(t({},i),r);var s={elementMap:new WeakMap,options:r},f=a(s),d=function(e,t){return function(n,r){var o=r.value,i=r.arg,s=e.elementMap,a={fullText:n.textContent,maxLines:c(e,o),snipMethod:u(e,i)};s.set(n,a),"js"===a.snipMethod&&"undefined"!=typeof ResizeObserver?l(e,t,n):t(n)}}(s,f),v=function(e,t){return function(n,r){var o=r.value,i=r.arg,s=e.elementMap.get(n),a=s.maxLines,f=s.snipMethod;s.maxLines=c(e,o),s.snipMethod=u(e,i),"js"===s.snipMethod&&"undefined"!=typeof ResizeObserver?l(e,t,n):p(e,n),(a!==s.maxLines||f!==s.snipMethod&&"css"===s.snipMethod)&&t(n)}}(s,f),b=function(e){return function(t){var n=e.elementMap;p(e,t),n.delete(t)}}(s),y=e.version[0]>2;e.directive(r.directiveName,(n(o={},y?"mounted":"inserted",d),n(o,y?"updated":"update",v),n(o,y?"unmounted":"unbind",b),o)),r.exposeSnipFunction&&(e.prototype["$".concat(r.snipFunctionName)]=f),r.debugMode&&(window.__VueSnipState=s)}}}));
